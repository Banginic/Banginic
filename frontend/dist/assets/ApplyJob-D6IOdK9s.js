var M=r=>{throw TypeError(r)};var E=(r,e,t)=>e.has(r)||M("Cannot "+t);var n=(r,e,t)=>(E(r,e,"read from private field"),t?t.call(r):e.get(r)),v=(r,e,t)=>e.has(r)?M("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),y=(r,e,t,i)=>(E(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t),j=(r,e,t)=>(E(r,e,"access private method"),t);import{w as T,x as z,z as k,B as D,D as F,F as U,r as b,G as J,H as B,A as I,j as s,L as P,S as G,b as H,y as Q,a as V}from"./index-D3pPIOb1.js";var x,g,l,c,m,A,O,L,Y=(L=class extends T{constructor(e,t){super();v(this,m);v(this,x);v(this,g);v(this,l);v(this,c);y(this,x,e),this.setOptions(t),this.bindMethods(),j(this,m,A).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var i;const t=this.options;this.options=n(this,x).defaultMutationOptions(e),z(this.options,t)||n(this,x).getMutationCache().notify({type:"observerOptionsUpdated",mutation:n(this,l),observer:this}),t!=null&&t.mutationKey&&this.options.mutationKey&&k(t.mutationKey)!==k(this.options.mutationKey)?this.reset():((i=n(this,l))==null?void 0:i.state.status)==="pending"&&n(this,l).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=n(this,l))==null||e.removeObserver(this)}onMutationUpdate(e){j(this,m,A).call(this),j(this,m,O).call(this,e)}getCurrentResult(){return n(this,g)}reset(){var e;(e=n(this,l))==null||e.removeObserver(this),y(this,l,void 0),j(this,m,A).call(this),j(this,m,O).call(this)}mutate(e,t){var i;return y(this,c,t),(i=n(this,l))==null||i.removeObserver(this),y(this,l,n(this,x).getMutationCache().build(n(this,x),this.options)),n(this,l).addObserver(this),n(this,l).execute(e)}},x=new WeakMap,g=new WeakMap,l=new WeakMap,c=new WeakMap,m=new WeakSet,A=function(){var t;const e=((t=n(this,l))==null?void 0:t.state)??D();y(this,g,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},O=function(e){F.batch(()=>{var t,i,a,u,h,d,w,N;if(n(this,c)&&this.hasListeners()){const p=n(this,g).variables,f=n(this,g).context;(e==null?void 0:e.type)==="success"?((i=(t=n(this,c)).onSuccess)==null||i.call(t,e.data,p,f),(u=(a=n(this,c)).onSettled)==null||u.call(a,e.data,null,p,f)):(e==null?void 0:e.type)==="error"&&((d=(h=n(this,c)).onError)==null||d.call(h,e.error,p,f),(N=(w=n(this,c)).onSettled)==null||N.call(w,void 0,e.error,p,f))}this.listeners.forEach(p=>{p(n(this,g))})})},L);function $(r,e){const t=U(),[i]=b.useState(()=>new Y(t,r));b.useEffect(()=>{i.setOptions(r)},[i,r]);const a=b.useSyncExternalStore(b.useCallback(h=>i.subscribe(F.batchCalls(h)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=b.useCallback((h,d)=>{i.mutate(h,d).catch(J)},[i]);if(a.error&&B(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:u,mutateAsync:a.mutate}}function Z(r){const e=b.useContext(I),[t,i]=b.useState(""),[a,u]=b.useState({fullName:"",emailAddress:"",phone:"",motivation:"",cv:null});function h(){u({fullName:"",emailAddress:"",phone:"",motivation:"",cv:null})}const d=new FormData;d.append("fullName",a.fullName),d.append("emailAddress",a.emailAddress),d.append("phone",a.phone),d.append("motivation",a.motivation),a.cv&&d.append("cv",a.cv);const w=async()=>{const{data:o}=await V.post(`https://localhost:8080/api/v2/jobs/applications/create/${r.jobId}`,d);return o},{isPending:N,isError:p,mutate:f}=$({mutationFn:w,onSuccess:o=>{h(),Q.success(o.message),setTimeout(()=>e==null?void 0:e.navigate("/careers"),3e3)},onError:o=>{var C;o instanceof Error&&i(o.message),o instanceof H&&i((C=o==null?void 0:o.response)==null?void 0:C.data.message),h(),setTimeout(()=>e==null?void 0:e.navigate("/careers"),3e3)}}),S=o=>{const{name:C,value:K}=o.target;o.target.name==="cv"&&o.target.files?u({...a,cv:o.target.files[0]}):u({...a,[C]:K})},q=a.emailAddress.length<8||a.fullName.length<3||N||a.motivation.length<15;function R(o){o.preventDefault(),f()}return p?s.jsx("div",{className:"h-screen grid place-items-center",children:s.jsxs("div",{children:[s.jsx("h3",{className:"heading3 text-center",children:t}),s.jsxs("p",{className:"text-center text-gray-500",children:[s.jsx("a",{href:"#footer",className:"text-indigo-700 underline font-bold",children:"Subscribe"})," ","to our news letter to recieve information of latest openings"]})]})}):s.jsxs("form",{onSubmit:R,className:"w-sm border mx-auto shadow-accent/20 shadow-xl mt-12 lg:mt-8 border-gray-200 bg-white/50 dark:border-gray-800/50 dark:bg-gray-900/50 rounded-lg p-6 text-sm",children:[s.jsx(P,{textSize:"heading4",logoSize:"size-8"}),s.jsx("p",{className:"text-neutral-500",children:"Apply for this job using the form below."}),s.jsxs("div",{className:"mb-4 mt-8",children:[s.jsx("label",{htmlFor:"fullName",className:"block mb-1",children:"Full name"}),s.jsx("input",{type:"text",required:!0,onChange:S,value:a.fullName,name:"fullName",autoComplete:"full name",placeholder:"John Smith",maxLength:25,minLength:3,className:"border w-full py-2 px-4 rounded-xl border-gray-700/50 bg-transparent"})]}),s.jsxs("div",{className:"mb-4 ",children:[s.jsx("label",{htmlFor:"emailAddress",className:"block mb-1",children:"Email Address"}),s.jsx("input",{type:"text",required:!0,autoComplete:"email",onChange:S,value:a.emailAddress,name:"emailAddress",placeholder:"example@email.com",maxLength:25,minLength:3,className:"border w-full py-2 px-4 rounded-xl border-gray-700/50 bg-transparent"})]}),s.jsxs("div",{className:"mb-4 ",children:[s.jsx("label",{htmlFor:"phone",className:"block mb-1",children:"Telephone"}),s.jsx("input",{type:"tell",required:!0,name:"phone",autoComplete:"phone",onChange:S,value:a.phone,placeholder:"+1 343 3433 0030",maxLength:25,minLength:3,className:"border w-full py-2 px-4 rounded-lg border-gray-700/50 bg-transparent"})]}),s.jsxs("div",{className:"mb-4 ",children:[s.jsx("label",{htmlFor:"motivation",className:"block mb-1",children:"Motivation"}),s.jsx("textarea",{required:!0,onChange:o=>u({...a,motivation:o.target.value}),value:a.motivation,name:"motivation",placeholder:"Motivation letter",rows:4,className:"border w-full py-2 px-4 rounded-lg border-gray-700/50 bg-transparent"})]}),s.jsx("div",{className:"mb-4 ",children:s.jsxs("label",{htmlFor:"resume",children:["Upload your CV"," ",s.jsx("span",{className:"text-xs text-gray-500",children:"(pdf, doc, docx ONLY)"}),s.jsx("input",{type:"file",name:"cv",id:"resume",accept:".pdf, .doc, .docx",onChange:S,required:!0,className:"border border-gray-700/50 w-full cursor-pointer mt-1 py-2 px-4 rounded-md"})]})}),s.jsx("button",{type:"submit",disabled:q,className:"bg-black disabled:cursor-not-allowed flex justify-center items-center dark:bg-accent text-white text-sm py-2 cursor-pointer hover:opacity-90 trans px-6 w-full rounded-xl mt-4 disabled:bg-gray-400 dark:disabled:bg-gray-800",children:N?s.jsxs("span",{className:"flex items-center gap-2 ",children:[s.jsx(G,{}),"Appying... "]}):"Apply"}),s.jsx("p",{className:"text-red-500 text-center h-5 mt-1",children:t})]})}export{Z as default};
